<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
    <changeSet author="pavwebdev" id="1554199133-0">
        <tagDatabase tag="issue492"/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-1">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="ordhead" columnName="odh_pay_method"/>
        </preConditions>
        <dropColumn tableName="ordhead" columnName="odh_pay_method"/>
        <rollback>
            <addColumn tableName="ordhead">
                <column name="odh_pay_method" afterColumn="odh_consno" type="char(30)">
                    <constraints nullable="true"/>
                </column>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-2">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="invhead" columnName="inh_pay_method"/>
        </preConditions>
        <dropColumn tableName="invhead" columnName="inh_pay_method"/>
        <rollback>
            <addColumn tableName="invhead">
                <column name="inh_pay_method" afterColumn="inh_salutation" type="char(30)">
                    <constraints nullable="false"/>
                </column>
            </addColumn>
        </rollback>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-3">
        <dropNotNullConstraint columnName="cus_dropped_customer_date" tableName="customer" columnDataType="date"/>
        <dropNotNullConstraint tableName="customer" columnName="cus_became_customer_date" columnDataType="date"/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-4">
        <dropNotNullConstraint tableName="problem" columnName="pro_hd_pause_count" columnDataType="int(3)"/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-5">
        <dropNotNullConstraint tableName="problem" columnName="pro_management_review_reason" columnDataType="text"/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-6">
        <dropNotNullConstraint tableName="callactivity" columnName="caa_cuino" columnDataType="int(11) unsigned"/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-7">
        <dropNotNullConstraint tableName="callactivity" columnName="caa_secondsite_error_cuino"
                               columnDataType="int(11) unsigned"/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-8">
        <modifyDataType tableName="ordhead" columnName="odh_inv_fax" newDataType="char(25)"/>
        <rollback>
            <modifyDataType tableName="ordhead" columnName="odh_inv_fax" newDataType="char(20)"/>
        </rollback>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-9">
        <modifyDataType tableName="ordhead" columnName="odh_inv_phone" newDataType="char(25)"/>
        <rollback>
            <modifyDataType tableName="ordhead" columnName="odh_inv_phone" newDataType="char(20)"/>
        </rollback>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-10">
        <modifyDataType tableName="ordhead" columnName="odh_inv_salutation" newDataType="char(25)"/>
        <rollback>
            <modifyDataType tableName="ordhead" columnName="odh_inv_salutation" newDataType="char(15)"/>
        </rollback>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-11">
        <modifyDataType tableName="ordhead" columnName="odh_inv_contact" newDataType="char(35)"/>
        <rollback>
            <modifyDataType tableName="ordhead" columnName="odh_inv_contact" newDataType="char(25)"/>
        </rollback>
    </changeSet>

    <changeSet author="pavwebdev" id="1554199133-12">
        <modifyDataType tableName="ordhead" columnName="odh_del_fax" newDataType="char(25)"/>
        <rollback>
            <modifyDataType tableName="ordhead" columnName="odh_del_fax" newDataType="char(20)"/>
        </rollback>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-13">
        <modifyDataType tableName="ordhead" columnName="odh_del_phone" newDataType="char(25)"/>
        <rollback>
            <modifyDataType tableName="ordhead" columnName="odh_del_phone" newDataType="char(20)"/>
        </rollback>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-14">
        <modifyDataType tableName="ordhead" columnName="odh_del_salutation" newDataType="char(25)"/>
        <rollback>
            <modifyDataType tableName="ordhead" columnName="odh_del_salutation" newDataType="char(15)"/>
        </rollback>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-15">
        <modifyDataType tableName="ordhead" columnName="odh_del_contact" newDataType="char(35)"/>
        <rollback>
            <modifyDataType tableName="ordhead" columnName="odh_del_contact" newDataType="char(25)"/>
        </rollback>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-16">
        <sql>
            UPDATE porhead
            SET poh_ord_date = NULL
            WHERE poh_ord_date = '0000-00-00';
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-17">
        <sql>
            UPDATE porhead
            SET poh_required_by = NULL
            WHERE poh_required_by = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-18">
        <sql>
            UPDATE customer
            SET cus_became_customer_date = NULL
            WHERE cus_became_customer_date = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-19">
        <sql>
            UPDATE customer
            SET cus_dropped_customer_date = NULL
            WHERE cus_dropped_customer_date = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-20">
        <sql>
            UPDATE custitem
            SET startDate = NULL
            WHERE startDate = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-21">
        <sql>
            UPDATE custitem
            SET secondsiteValidationSuspendUntilDate = NULL
            WHERE secondsiteValidationSuspendUntilDate = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-22">
        <sql>
            UPDATE problem
            SET pro_alarm_date = NULL
            WHERE pro_alarm_date = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-23">
        <sql>
            UPDATE custitem
            SET cui_ord_date = NULL
            WHERE cui_ord_date = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-24">
        <sql>
            UPDATE invhead
            SET inh_date_printed = NULL
            WHERE inh_date_printed = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-25">
        <sql>
            UPDATE porline
            SET pol_exp_date = NULL
            WHERE pol_exp_date = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-26">
        <sql>
            UPDATE ordhead
            SET odh_req_date = NULL
            WHERE odh_req_date = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-27">
        <sql>
            UPDATE ordhead
            SET odh_prom_date = NULL
            WHERE odh_prom_date = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>

    <changeSet author="pavwebdev" id="1554199133-28">
        <sql>
            UPDATE ordhead
            SET odh_expect_date = NULL
            WHERE odh_expect_date = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-29">
        <sql>
            UPDATE customer
            SET reviewDate = NULL
            WHERE reviewDate = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-30">
        <sql>
            UPDATE customer
            SET cus_last_review_meeting_date = NULL
            WHERE cus_last_review_meeting_date = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-31">
        <sql>
            UPDATE secondsite_image
            SET imageTime = NULL
            WHERE imageTime = '0000-00-00 00:00:00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-32">
        <sql>
            UPDATE secondsite_image
            SET replicationImageTime = NULL
            WHERE replicationImageTime = '0000-00-00 00:00:00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-33">
        <sql>
            UPDATE custitem
            SET cui_expiry_date = NULL
            WHERE cui_expiry_date = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-34">
        <sql>
            UPDATE custitem
            SET dateGenerated = NULL
            WHERE dateGenerated = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-35">
        <sql>
            UPDATE custitem
            SET cui_desp_date = NULL
            WHERE cui_desp_date = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-36">
        <sql>
            UPDATE custitem
            SET cui_pord_date = NULL
            WHERE cui_pord_date = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-37">
        <sql>
            UPDATE custitem
            SET secondsiteSuspendedDate = NULL
            WHERE secondsiteSuspendedDate = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-38">
        <sql>
            UPDATE custitem
            SET secondsiteImageDelayDate = NULL
            WHERE secondsiteImageDelayDate = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-39">
        <sql>
            UPDATE project
            SET expiryDate = NULL
            WHERE expiryDate = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-40">
        <sql>
            UPDATE project
            SET commenceDate = NULL
            WHERE commenceDate = '0000-00-00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-41">
        <sql>
            UPDATE staffAppraisalQuestionnaire
            SET dateSent = NULL
            WHERE dateSent = '0000-00-00 00:00:00'
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-42">
        <preConditions>
            <tableExists tableName="broadbandservicetype"/>
        </preConditions>
        <dropTable tableName="broadbandservicetype"/>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-43">
        <dropNotNullConstraint columnName="curGSCBalance" tableName="custitem" columnDataType="decimal(8,2)"/>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-44">
        <sql>delete
             from calldocument
             where problemID = 0
               and callActivityID = 0</sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-45">
        <dropNotNullConstraint columnName="problemID" tableName="calldocument" columnDataType="int(11)"/>
        <dropNotNullConstraint tableName="calldocument" columnName="callActivityID" columnDataType="int(11)"/>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-46">
        <sql>
            update calldocument
            set problemID      = if(problemID = 0, null, problemID),
                callActivityID = if(callActivityID = 0, null, callActivityID)
        </sql>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-47">
        <dropTable tableName="arecord"/>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-48">
        <dropTable tableName="servicedeskreport"/>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-49">
        <dropTable tableName="notepad"/>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-50">
        <dropTable tableName="prizewinner"/>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-51">
        <dropTable tableName="securityapp"/>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-52">
        <dropTable tableName="escalation"/>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-53">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="callactivity" columnName="escalationID"/>
        </preConditions>
        <dropColumn tableName="callactivity" columnName="escalationID"/>
        <rollback/>
    </changeSet>
    <changeSet author="pavwebdev" id="1554199133-54">
        <dropTable tableName="ordline_sco"/>
        <rollback/>
    </changeSet>


</databaseChangeLog>